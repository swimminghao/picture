<!DOCTYPE html>
<html
  lang="zh-CN"
  data-theme="dark"
  data-overlayscrollbars-initialize
>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Halo使用DockerCompose+现有Mysql部署 - 人生若只如初见</title>

    

    
      <link rel="manifest" href="/themes/theme-walker/assets/dist/.vite/manifest.json" />
      <script src="/themes/theme-walker/assets/dist/main.js?v=1.12.1"></script>
      <link rel="stylesheet" href="/themes/theme-walker/assets/dist/main.css?v=1.12.1" />
    
    <script src="/themes/theme-walker/assets/lit-dist/walker-components.iife.js?v=1.12.1"></script>

    
      
    <link
      rel="stylesheet"
      href="/themes/theme-walker/assets/dist/github-markdown.css?v=1.12.1"
    />
  
    

    

    <script>
      window.initColorScheme("system","light","dark",true,true)
    </script>

    <style>
      .main {
        max-width: 1200px;
        margin: 0 auto;
      }
    </style>

    <noscript>
      <style>
        body {
          display: block !important;
        }
      </style>
    </noscript>
  <!--Google AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7677583729712005"
     crossorigin="anonymous"></script>
<!-- 注入全局字体 start -->
<link rel="stylesheet" href="https://cdn.staticfile.net/lxgw-wenkai-webfont/1.7.0/style.css" />
<style>
  body,#post-content,.markdown-body {
    font-family: "LXGW WenKai",PingFang SC,Hiragino Sans GB,Droid Sans Fallback,Microsoft YaHei,sans-serif !important;
  }

  :root {
    --halo-comment-widget-base-font-family: "LXGW WenKai",PingFang SC,Hiragino Sans GB,Droid Sans Fallback,Microsoft YaHei,sans-serif !important;
    --halo-search-widget-base-font-family: "LXGW WenKai",PingFang SC,Hiragino Sans GB,Droid Sans Fallback,Microsoft YaHei,sans-serif !important;
  }
</style>
<!-- 注入全局字体 end -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JWXJJ5Q840"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JWXJJ5Q840');
</script>
<meta name="generator" content="Halo 2.20.9"/><meta name="description" content="没有Mysql数据库参考官方文档同时在容器启动一个Mysql官方文档参考已有Mysql 使用halo容器+已有mysql启动docker-compose.yamlversion: &amp;quot;3&amp;quot;services:  halo_server:    image: halohub/halo:"/><script async defer data-website-id="bfa622f9-1f03-4988-8208-331cb7a105fd" src="https://umami.wxy97.com/script.js"></script>
<link href="/plugins/plugin-douban/assets/static/style.css?version=1.2.1" rel="stylesheet"/>
 <script src="/plugins/plugin-douban/assets/static/contact-douban.iife.js?version=1.2.1"></script>
 <!-- PluginSearchWidget start -->
<script src="/plugins/PluginSearchWidget/assets/static/search-widget.iife.js?version=1.6.2" async></script>
<link rel="stylesheet" href="/plugins/PluginSearchWidget/assets/static/style.css?version=1.6.2" />
<!-- PluginSearchWidget end -->
<meta name="google-site-verification" content="hq4N8E-FSrTPbDQMtoDyJIGFMyXjvwbzVMGt5HDLtSY"/><meta content="https://cdn.wxy97.com//blog/r7fyeq-0.webp" property="og:image"/><meta content="article" property="og:type"/><meta content="2023-03-25T06:58:59.698Z" property="article:published_time"/><meta content="2023-08-31T08:40:30.711512838Z" property="article:modified_time"/><meta content="Halo使用DockerCompose+现有Mysql部署" property="og:title"/><meta content="没有Mysql数据库参考官方文档同时在容器启动一个Mysql官方文档参考已有Mysql 使用halo容器+已有mysql启动docker-compose.yamlversion: &quot;3&quot;services:  halo_server:    image: halohub/halo:" property="og:description"/><meta content="https://www.wxy97.com/authors/wxy" property="article:author"/><meta content="Halo" property="article:tag"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="https://www.wxy97.com/authors/wxy"/><meta name="twitter:title" content="Halo使用DockerCompose+现有Mysql部署"/><meta name="twitter:description" content="没有Mysql数据库参考官方文档同时在容器启动一个Mysql官方文档参考已有Mysql 使用halo容器+已有mysql启动docker-compose.yamlversion: &quot;3&quot;services:  halo_server:    image: halohub/halo:"/><meta name="twitter:image" content="https://cdn.wxy97.com//blog/r7fyeq-0.webp"/><link href="/plugins/LinksSubmit/assets/static/linksSubmitOne.css?version=2.0.4" rel="stylesheet" />
<style>
:root {
    --border-radius: 0.75rem;
    --background-color: #aa9d9d;
    --input-background-color: #f0f0f0;
    --text-color: black;
    --info-color: #606060;
    --warning-color: #dc2f55;
    --success-color: #a9f140;
    --tip-color: #50d2d4;
    --button-color: #08d;
    --button-active-color: #06b;
    --box-base-size: 16;
    --rem-multiplier: calc(var(--box-base-size) / 16);
}
/* 日间模式配色 */
 [data-theme=light] {
    --background-color: #aa9d9d;
    --input-background-color: #f0f0f0;
    --text-color: black;
    --info-color: #606060;
    --warning-color: #dc2f55;
    --success-color: #a9f140;
    --tip-color: #50d2d4;
    --button-color: #08d;
    --button-active-color: #06b;
}
/* 夜间模式配色 */
.color-scheme-dark, .dark, [data-color-scheme=dark] {
    --background-color: white;
    --input-background-color: #f0f0f0;
    --text-color: black;
    --info-color: #606060;
    --warning-color: #dc2f55;
    --success-color: #a9f140;
    --tip-color: #50d2d4;
    --button-color: #08d;
    --button-active-color: #06b;
}
</style>
<script src="/plugins/LinksSubmit/assets/static/linkssubmit.js?version=2.0.4"></script>
<!-- PluginLightGallery start -->
<link href="/plugins/PluginLightGallery/assets/static/css/lightgallery.min.css" rel="stylesheet" />
<script defer src="/plugins/PluginLightGallery/assets/static/js/lightgallery.min.js"></script>
<!-- PluginLightGallery zoom plugin -->
<script defer src="/plugins/PluginLightGallery/assets/static/js/plugins/zoom/lg-zoom.min.js"></script>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function () {
       document.querySelectorAll(`#post-content img`)?.forEach(function (node) {
  if (node) {
    node.dataset.src = node.src;
  }

  const galleries = document.querySelectorAll(`#post-content`);

  if (galleries.length > 0) {
    galleries.forEach(function (node) {
      lightGallery(node, {
          selector: "img",
      });
    });
  }
});

    });
</script>
<!-- PluginLightGallery end -->
<!-- plugin-editor-hyperlink-card start -->
<script defer src="/plugins/editor-hyperlink-card/assets/static/hyperlink-card.iife.js?version=1.3.0"></script>
<link rel="stylesheet" href="/plugins/editor-hyperlink-card/assets/static/var.css?version=1.3.0" />
<!-- plugin-editor-hyperlink-card end -->
<!-- restricted-reading start -->
<script src="/plugins/restricted-reading/assets/static/content-restrict-widget.iife.js?version=1.4.3"></script>
<link rel="stylesheet" href="/plugins/restricted-reading/assets/static/var.css?version=1.4.3" />
<!-- restricted-reading end -->
<!-- plugin-comment-widget start -->
<script src="/plugins/PluginCommentWidget/assets/static/comment-widget.iife.js?version=2.5.1"></script>
<link rel="stylesheet" href="/plugins/PluginCommentWidget/assets/static/style.css?version=2.5.1" />
<!-- plugin-comment-widget end -->
<script class="pjax">
    var autoContactFrom = []
</script>
<script src="/plugins/PluginContactForm/assets/static/contact-form.iife.js?version=1.1.0"></script>
<link rel="stylesheet" href="/plugins/PluginContactForm/assets/static/style.css?version=1.1.0" />
<!-- PluginHighlightJS start -->
<link href="/plugins/PluginHighlightJS/assets/static/styles/devibeans.min.css?version=1.3.2" rel="stylesheet"/>
<script defer src="/plugins/PluginHighlightJS/assets/static/highlight.min.js?version=1.3.2"></script>


    <link href="/plugins/PluginHighlightJS/assets/static/plugins/highlightjs-copy.css?version=1.3.2" rel="stylesheet"/>
    <script defer src="/plugins/PluginHighlightJS/assets/static/plugins/highlightjs-copy.js?version=1.3.2"></script>


<link href="/plugins/PluginHighlightJS/assets/static/plugins/override.css?version=1.3.2" rel="stylesheet"/>

<script>
document.addEventListener("DOMContentLoaded", function () {
    
        hljs.addPlugin(new CopyButtonPlugin({ lang: "zh"}));
    
    document.querySelectorAll("pre code").forEach((el) => {
        hljs.highlightElement(el);
    });
});
</script>
<!-- PluginHighlightJS end -->
<script async defer src="/halo-tracker.js" data-group="content.halo.run" data-plural="posts" data-name="71"></script>
<link rel="icon" href="/logo" />
</head>
  <body x-data="app" class="hidden" data-overlayscrollbars-initialize>
    <div class="fixed left-0 right-0 top-0 z-50 flex items-center bg-base-100 p-4 shadow-sm lg:hidden">
  <i class="animated fadeIn i-ri-menu-2-line inline-block cursor-pointer text-2xl" @click="openMenu()"> </i>
  <a href="https://www.wxy97.com">
    <img
      class="animated fadeIn avatar mx-4 mt-0 size-9 rounded-lg"
      src="/logo"
      alt="人生若只如初见"
      width="36"
      height="36"
    />
  </a>
  <h1
    class="animated fadeIn mt-0 text-xl font-extrabold"
    style="animation-delay: 0.1s"
  >WXY</h1>
  <!-- https://github.com/halo-sigs/plugin-search-widget -->
  <div class="flex flex-1 items-center justify-end gap-4">
    <a
      class="animated fadeIn i-ri-search-line inline-block cursor-pointer text-xl text-base-content/60 hover:text-base-content"
      href="javascript:SearchWidget.open()"
    ></a>

    
      <label
        class="hidden cursor-pointer place-items-center [@supports(color:oklch(0_0_0))]:grid"
        x-data="colorSchemeSwitcher"
      >
        <input
          type="checkbox"
          class="toggle col-span-2 col-start-1 row-start-1 bg-base-content"
          x-model="checked"
          @click="handleChange"
        />
        <svg
          class="col-start-1 row-start-1 fill-base-100 stroke-base-100"
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="12" cy="12" r="5" />
          <path
            d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"
          />
        </svg>
        <svg
          class="col-start-2 row-start-1 fill-base-100 stroke-base-100"
          xmlns="http://www.w3.org/2000/svg"
          width="14"
          height="14"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </label>
      
    
  </div>
</div>

    
    <div id="app" class="main flex flex-col px-4 lg:flex-row" x-data="upvote('post','content.halo.run','posts')">
      <div id="sidebar" class="sidebar-wrapper lg:static lg:w-1/4">
  <div class="top-0 lg:sticky">
    <div class="sidebar-content">
      <div class="static left-0 right-0 top-0 z-50 hidden items-center p-4 px-0 lg:block">
        <div class="flex items-center justify-between">
          

          <div
            class="inline-flex items-center gap-4 justify-between !flex w-full"
          >
            
              <label
                class="mt-4 hidden cursor-pointer place-items-center [@supports(color:oklch(0_0_0))]:grid"
                x-data="colorSchemeSwitcher"
              >
                <input
                  type="checkbox"
                  class="toggle toggle-md col-span-2 col-start-1 row-start-1 bg-base-content"
                  x-model="checked"
                  @click="handleChange"
                />
                <svg
                  class="col-start-1 row-start-1 fill-base-100 stroke-base-100"
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="5" />
                  <path
                    d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"
                  />
                </svg>
                <svg
                  class="col-start-2 row-start-1 fill-base-100 stroke-base-100"
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                </svg>
              </label>

              
            

            <!-- https://github.com/halo-sigs/plugin-search-widget -->
            <a
              class="animated fadeIn i-ri-search-line mt-4 inline-block cursor-pointer text-2xl text-base-content/60 hover:text-base-content"
              href="javascript:SearchWidget.open()"
            ></a>
          </div>
        </div>
        <div class="group relative mt-32 inline-block">
          <a href="https://www.wxy97.com">
            <img
              class="animated fadeIn avatar mx-0 size-24 rounded-lg"
              src="/logo"
              alt="人生若只如初见"
              width="96"
              height="96"
            />
          </a>

          
            <a
              href="/login?redirect_uri=/"
              class="btn btn-circle btn-neutral btn-sm absolute inline-block translate-x-2 text-lg opacity-0 transition-all group-hover:translate-x-0 group-hover:opacity-100 -bottom-1 -right-2"
            >
              <span data-tip="登录" class="tooltip !inline-flex size-full items-center justify-center">
                <i class="i-tabler-login inline-block text-base"></i>
              </span>
            </a>
            
          
        </div>
        <h1
          class="animated fadeIn mt-8 text-4xl font-extrabold"
          style="animation-delay: 0.1s"
        >WXY</h1>
      </div>
      
      
      <div class="animated fadeIn" style="animation-delay: 0.4s">
        <p class="my-4 hidden font-light text-base-content/80 lg:block">文章目录</p>
        <div class="toc-container hidden lg:block"></div>
      </div>
    </div>
  </div>
</div>

<div class="menu-container" :class="{ 'open' : menuVisible }">
  <i
    class="animated fadeIn close-menu-btn i-ri-arrow-left-line inline-block cursor-pointer text-2xl"
    @click="closeMenu()"
  ></i>

  <div class="w-full" :class="{ 'animated fadeIn' : menuVisible}">
    <ul x-data="menu" id="menu-container" class="w-full space-y-6">
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/"
        target="_self"
      >
        
        <span>首页</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/archives"
        target="_self"
      >
        
        <span>归档</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/tags"
        target="_self"
      >
        
        <span>标签</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/photos"
        target="_self"
      >
        
        <span>相册</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/moments"
        target="_self"
      >
        
        <span>瞬间</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/douban"
        target="_self"
      >
        
        <span>影读</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/links"
        target="_self"
      >
        
        <span>友链</span>
      </a>
    </li>

    
  
    <li>
      <a
        class="flex items-center space-x-2.5 text-base-content/70 hover:text-base-content"
        href="/about"
      >
        
        <span>关于</span>
      </a>
    </li>

    
  
</ul>

  </div>
</div>
<div class="mask" :class="{ 'open' : menuVisible}" @click="closeMenu()"></div>

      <div
        class="content-wrapper post-detail animated fadeIn pt-32 lg:w-3/4 lg:p-8"
        :class="{ 'is-second' : menuVisible }" x-data="{name:&#39;71&#39;}"
      >
        <div
          class="flex flex-wrap items-center justify-between gap-2" x-data="uiPermission(&#39;anonymousUser&#39;,&#39;system:posts:manage&#39;)"
        >
          <h1 class="break-all text-3xl font-bold">Halo使用DockerCompose+现有Mysql部署</h1>
          <template x-if="shouldDisplay">
            <a
              class="btn btn-ghost btn-sm"
              href="/console/posts/editor?name=71&amp;returnToView=true"
            >
              <i class="i-tabler-edit"></i>
              <span> 编辑 </span>
            </a>
          </template>
        </div>

        <div class="my-4 flex flex-wrap items-center justify-between lg:my-8">
          <div class="flex gap-4">
            <div class="inline-flex items-center gap-1.5">
              <div class="i-ri-archive-2-line text-base-content/50"></div>
              <a
                class="text-sm font-light text-base-content/50 hover:text-base-content"
                href="/categories/technology"
                title="技术教程"
              >技术教程</a>
            </div>
            <div class="inline-flex items-center gap-1.5">
              <div class="i-ri-eye-line text-base-content/50"></div>
              <span class="text-sm font-light text-base-content/50">2296</span>
            </div>
            
          </div>
          <div>
            <div
              class="text-sm font-light text-base-content/50"
              title="2023-03-25T06:58:59.698Z"
            >2023-03-25</div>
          </div>
        </div>

        

        <div
          class="break-all py-4 markdown-body"
          id="post-content"
        ><div data-type="sign" id="vditor-article-sign"></div><div data-type="var" id="vditor-var-cdn" value="/plugins/vditor-mde/assets/static"></div><link rel="stylesheet" type="text/css" href="/plugins/vditor-mde/assets/static/vditor-render.css?version=1.8.0" id="vditor-style"><script src="/plugins/vditor-mde/assets/static/dist/method.min.js?version=1.8.0" id="vditor-methods"></script><script src="/plugins/vditor-mde/assets/static/render-utils.js?version=1.8.0" id="vditor-render-utils"></script><script src="/plugins/vditor-mde/assets/static/halo-renders/index.js?version=1.8.0" id="vditor-halo-render-js"></script><link rel="stylesheet" type="text/css" href="/plugins/vditor-mde/assets/static/halo-renders/index.css?version=1.8.0" id="vditor-halo-render-css"><script src="/plugins/vditor-mde/assets/static/external/halo-renders.js?version=1.8.0" id="vditor-halo-render"></script><script src="/plugins/vditor-mde/assets/static/render.js?version=1.8.0" id="vditor-render"></script>
<script defer src="/plugins/text-diagram/assets/static/mermaid.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
      const postBody = document.body
      mermaid.initialize({ startOnLoad: false });
      mermaid.run({
        querySelector: 'text-diagram[data-type=mermaid]',
      });
    });
</script>

<h2 id="%E6%B2%A1%E6%9C%89mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8F%82%E8%80%83%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%90%8C%E6%97%B6%E5%9C%A8%E5%AE%B9%E5%99%A8%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AAmysql" tabindex="-1">没有Mysql数据库参考官方文档同时在容器启动一个Mysql</h2>
<p><a href="https://docs.halo.run/getting-started/install/docker-compose" target="_blank">官方文档参考</a></p>
<h2 id="%E5%B7%B2%E6%9C%89mysql-%E4%BD%BF%E7%94%A8halo%E5%AE%B9%E5%99%A8%2B%E5%B7%B2%E6%9C%89mysql%E5%90%AF%E5%8A%A8" tabindex="-1">已有Mysql 使用halo容器+已有mysql启动</h2>
<h4 id="%E6%96%B9%E5%BC%8F%E4%B8%80-%E9%80%9A%E8%BF%87%E8%AE%BE%E7%BD%AEnetwork_mode" tabindex="-1">方式一 通过设置network_mode</h4>
<h5 id="1.x" tabindex="-1">1.x</h5>
<p><code>docker-compose.yaml</code></p>
<pre><code class="language-yml">version: "3"

services:
  halo_server:
    image: halohub/halo:1.6.0
    container_name: blog
    restart: on-failure:3
    network_mode: "host" #还有这行
    volumes:
      - ./:/root/.halo
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    environment:
      - SERVER_PORT=8090
      - SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver
      - SPRING_DATASOURCE_URL=jdbc:mysql://127.0.0.1:3306/数据库名称?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
      - SPRING_DATASOURCE_USERNAME=数据库账户
      - SPRING_DATASOURCE_PASSWORD=数据库密码
      - HALO_ADMIN_PATH=admin
      - HALO_CACHE=memory
</code></pre>
<h5 id="2.x" tabindex="-1">2.x</h5>
<p><code>docker-compose.yaml</code></p>
<pre><code class="language-yml">version: "3"

services:
  halo:
    image: halohub/halo:2.4
    container_name: halo
    restart: on-failure:3
    network_mode: "host"
    volumes:
      - ./:/root/.halo2
    command:
      # 修改为自己已有的MySQL配置
      - --spring.r2dbc.url=r2dbc:pool:mysql://127.0.0.1:3306/halo
      - --spring.r2dbc.username=用户名
      - --spring.r2dbc.password=密码
      - --spring.sql.init.platform=mysql
      # 外部访问地址，请根据实际需要修改
      - --halo.external-url=http://localhost:8090/
      # 初始化的超级管理员用户名
      - --halo.security.initializer.superadminusername=admin
      # 初始化的超级管理员密码
      - --halo.security.initializer.superadminpassword=admin
      # 端口号 默认8090
      - --server.port=8090

</code></pre>
<h4 id="%E6%96%B9%E5%BC%8F%E4%BA%8C-%E9%80%9A%E8%BF%87host.docker.internal-(%E6%8E%A8%E8%8D%90)" tabindex="-1">方式二 通过host.docker.internal (推荐)</h4>
<h5 id="1.x-1" tabindex="-1">1.x</h5>
<p><code>docker-compose.yaml</code></p>
<pre><code class="language-yml">version: "3"

services:
  halo_server:
    image: halohub/halo:1.6.0
    container_name: blog
    ports:
      - "8090:8090"
    restart: on-failure:3
    volumes:
      - ./:/root/.halo
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    environment:
      - SERVER_PORT=8090
      - SPRING_DATASOURCE_DRIVER_CLASS_NAME=com.mysql.cj.jdbc.Driver
      - SPRING_DATASOURCE_URL=jdbc:mysql://host.docker.internal::3306/数据库名称?characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;allowPublicKeyRetrieval=true
      - SPRING_DATASOURCE_USERNAME=数据库账户
      - SPRING_DATASOURCE_PASSWORD=数据库密码
      - HALO_ADMIN_PATH=admin
      - HALO_CACHE=memory
    extra_hosts:
      - host.docker.internal:host-gateway
</code></pre>
<h5 id="2.x-1" tabindex="-1">2.x</h5>
<p><code>docker-compose.yaml</code></p>
<pre><code class="language-yml">version: "3"

services:
  halo:
    image: halohub/halo:2.4
    container_name: halo
    restart: on-failure:3
    volumes:
      - ./:/root/.halo2
    ports:
      - "8090:8090"  
    command:
      # 修改为自己已有的MySQL配置
      - --spring.r2dbc.url=r2dbc:pool:mysql://host.docker.internal:3306/halo
      - --spring.r2dbc.username=用户名
      - --spring.r2dbc.password=密码
      - --spring.sql.init.platform=mysql
      # 外部访问地址，请根据实际需要修改
      - --halo.external-url=http://localhost:8090/
      # 初始化的超级管理员用户名
      - --halo.security.initializer.superadminusername=admin
      # 初始化的超级管理员密码
      - --halo.security.initializer.superadminpassword=admin
      # 端口号 默认8090
      - --server.port=8090
    extra_hosts:
      - host.docker.internal:host-gateway
</code></pre>
<h4 id="%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%8C%BA%E5%88%AB" tabindex="-1">两种方式区别</h4>
<p>参考<a href="https://www.wxy97.com/archives/78" target="_blank">https://www.wxy97.com/archives/78</a></p>
<h3 id="%E5%90%AF%E5%8A%A8-halo-%E6%9C%8D%E5%8A%A1" tabindex="-1">启动 Halo 服务</h3>
<pre><code class="language-shell">docker-compose up -d 

</code></pre>
<blockquote>
<p>详细说明请参考<a href="https://docs.halo.run/getting-started/install/docker-compose" target="_blank">官方文档</a></p>
</blockquote>
</div>

        <div class="my-4 flex flex-wrap items-center gap-1.5">
          <div class="i-ri-hashtag text-base-content/50"></div>
          <a
            href="/tags/docker"
            class="inline-flex items-center gap-x-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-700"
          >
            #Docker
            <sup>12</sup>
          </a><a
            href="/tags/halo"
            class="inline-flex items-center gap-x-1.5 rounded-full bg-purple-100 px-2 py-1 text-xs font-medium text-purple-700"
          >
            #Halo
            <sup>5</sup>
          </a>
        </div>

        <div
          class="sticky bottom-10 flex items-center justify-center"
        >
          <ul
            class="z-10 flex h-12 items-center gap-2 rounded-full border border-base-content/10 bg-base-100 px-2 py-1.5 shadow-lg"
          >
            <li
              class="group inline-flex h-full cursor-pointer items-center justify-center gap-1.5 rounded-full px-2 hover:bg-base-200"
              @click="handleUpvote(name)"
            >
              <div x-show="upvoted(name)" class="i-ri-heart-3-fill text-red-700"></div>
              <div
                x-show="!upvoted(name)"
                class="i-ri-heart-3-line text-base-content/70 group-hover:text-red-600"
              ></div>
              <span
                class="text-sm text-base-content/70"
                data-upvote-post-name="71"
              >12</span>
            </li>
            <li
              class="group inline-flex h-full cursor-pointer items-center rounded-full px-2 hover:bg-base-200"
            >
              <a class="inline-flex size-full items-center justify-center gap-1.5" href="#post-comment">
                <div class="i-ri-message-3-line text-base-content/70"></div>
                <span class="text-sm text-base-content/70">1</span>
              </a>
            </li>
            
            <li
              class="group inline-flex h-full cursor-pointer items-center justify-center gap-1.5 rounded-full px-2 hover:bg-base-200"
              @click="shareModal = true" x-data="share([{&quot;id&quot;:&quot;wechat&quot;},{&quot;id&quot;:&quot;x&quot;},{&quot;id&quot;:&quot;telegram&quot;},{&quot;id&quot;:&quot;qq&quot;},{&quot;id&quot;:&quot;douban&quot;},{&quot;id&quot;:&quot;native&quot;}],[&quot;native&quot;,&quot;wechat&quot;,&quot;x&quot;,&quot;telegram&quot;])"
            >
              <div class="i-ri-share-line text-base-content/70"></div>
              <template x-teleport="body">
  <div>
    <div
      class="fixed inset-0 z-50 bg-[#0006] opacity-100 backdrop-blur-sm"
      aria-hidden="true"
      x-show="shareModal"
      x-transition:enter="ease-in-out duration-300"
      x-transition:enter-start="opacity-0"
      x-transition:enter-end="opacity-100"
      x-transition:leave="ease-in-out duration-300"
      x-transition:leave-start="opacity-100"
      x-transition:leave-end="opacity-0"
    ></div>
    <div
      class="fixed inset-0 z-50 overflow-y-auto"
      tabindex="-1"
      x-show="shareModal"
      x-transition:enter="ease-out duration-200"
      x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
      x-transition:leave="ease-in duration-100"
      x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
      x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
    >
      <div class="flex min-h-full flex-col items-center justify-center p-4 text-center sm:p-0">
        <div
          @click.outside="shareModal = false"
          class="relative my-4 transform overflow-hidden rounded-lg bg-base-100 p-4 text-left shadow-xl transition-all sm:w-full sm:max-w-xl"
        >
          <h1 class="text-lg font-semibold">分享</h1>
          <div class="my-8">
            <div class="grid grid-cols-5 gap-6 sm:grid-cols-6">
              <template x-for="item in activeShareItems">
                <div class="inline-flex flex-col items-center justify-center gap-1.5 rounded-full">
                  <div
                    class="inline-flex size-12 cursor-pointer items-center justify-center rounded-full bg-base-200 transition-all hover:bg-base-300 sm:size-16"
                    @click="handleShare(item.id)"
                  >
                    <div class="text-xl text-base-content" :class="item.icon"></div>
                  </div>
                  <div class="text-base-content/60˝ hidden text-xs sm:block" x-text="item.name"></div>
                </div>
              </template>
            </div>
            <div class="mt-10">
              <div
                class="flex flex-wrap items-center justify-center gap-1 rounded-lg bg-base-200 px-3 py-2 sm:justify-between"
              >
                <div class="select-all text-xs font-light text-base-content/60" x-text="permalink"></div>
                <div
                  class="cursor-pointer select-none text-sm text-base-content/60 hover:text-base-content"
                  @click="handleCopy"
                  x-text="copied ? '已复制':'复制'"
                ></div>
              </div>
            </div>
          </div>
        </div>
        <div>
          <div
            @click="shareModal = false"
            class="group inline-flex cursor-pointer items-center justify-center rounded-full bg-base-100 p-1.5"
          >
            <i class="i-ri-close-line block text-base-content/60 group-hover:text-base-content"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

            </li>
          </ul>
        </div>

        <div class="flex justify-between py-8">
          <div class="w-1/2 pr-4">
            <a
              href="/archives/70"
              title="解决Linux x64操作系统环境下使用IDEA输入法光标不跟随"
            >
              <div
                class="inline-flex items-center gap-1 border-b-2 border-b-transparent text-sm text-base-content/90 hover:border-base-content hover:text-base-content"
              >
                <i class="i-ri-arrow-left-line inline-block flex-none"></i>
                <span class="flex-1 shrink break-all">解决Linux x64操作系统环境下使用IDEA输入法光标不跟随</span>
              </div>
            </a>
          </div>
          <div class="w-1/2 pl-4 text-right">
            <a
              href="/archives/69"
              title="使用proxychains-ng代理转发终端命令"
            >
              <div
                class="inline-flex items-center gap-1 border-b-2 border-b-transparent text-sm text-base-content/90 hover:border-base-content hover:text-base-content"
              >
                <span class="flex-1 shrink break-all">使用proxychains-ng代理转发终端命令</span>
                <i class="i-ri-arrow-right-line inline-block flex-none"></i>
              </div>
            </a>
          </div>
        </div>
        <div id="post-comment" class="comment-widget">
          <div id="comment-content-halo-run-Post-71"></div>
<script>
  CommentWidget.init(
    "#comment-content-halo-run-Post-71",
    {
      group: "content.halo.run",
      kind: "Post",
      name: "71",
      size: 20,
      replySize: 10,
      withReplies: false,
      withReplySize: 5,
      useAvatarProvider: true,
      avatarProvider: "gravatar",
      avatarProviderMirror: "https://cravatar.cn",
      avatarPolicy: "noAvatarUser",
      captchaEnabled: true,
    }
  );
</script>

        </div>
      </div>
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        generateToc();
      });
    </script>
  
    <footer class="mt-10 space-y-2 bg-base-100 py-8">
  <hr class="my-6 border-base-content/5 sm:mx-auto lg:my-8" />
  <span class="container mx-auto block text-center text-sm text-base-content/70">
    ©
    2024
    <a href="/">人生若只如初见</a> Powered by
    <a href="https://halo.run" class="hover:text-base-content" target="_blank">Halo</a> Theme
    <a href="https://halo.run/store/apps/app-GHgAR" target="_blank" class="hover:text-base-content">Walker</a>
  </span>
  <span class="container mx-auto block text-center text-sm text-base-content/70">
    <!-- 备案号 start -->
<span class="container mx-auto block text-center text-sm text-gray-500 dark:text-slate-300">
      <a
        href="https://beian.miit.gov.cn/"
        class="hover:underline"
        target="_blank"
      >豫ICP备18043922号-1</a>
</span>
<!-- 备案号 end -->

<!--底部又拍云logo start-->
<span class="container mx-auto block text-center text-sm text-gray-500 dark:text-slate-300">
<a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank" title="本站由又拍云提供CDN加速/云存储服务">本站由 <img width="50px" height="25.5px" style="display:inline-block;vertical-align:middle;" src="https://cdn.wxy97.com/blog/2024-06-21-troyygth.webp" alt="又拍云" /> 提供 CDN 加速/云存储服务</a>
</span>
<!--底部又拍云logo end-->


<!--底部ipv6 start-->
<span class="container mx-auto block text-center text-sm text-gray-500 dark:text-slate-300">
<a href="https://ipw.cn/ipv6webcheck/?site=www.wxy97.com/" title="本站支持IPv6访问" target='_blank'><img style='display:inline-block;vertical-align:middle' alt="本站支持IPv6访问" src="https://static.ipw.cn/icon/ipv6-s4.svg"></a></span>
<!--底部ipv6 end-->
<!-- linksSubmit遮罩层 -->
<style>
    /* 定义动画 */
    @keyframes fadeIn {
        0% {
            opacity: 0;
        }
        100% {
            opacity: 1;
        }
    }
    .linksSubmit-overlay {
        background-color: rgba(0, 0, 0, 20%);
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: none;
        justify-content: center;
        align-items: flex-start;
        z-index: 9999;
        overflow: overlay;
        /* 添加动画属性 */
        animation: fadeIn 0.5s ease-in-out forwards; /* 动画名称、持续时间、缓动函数、播放方向 */
    }
</style>
<div class="linksSubmit-overlay" id="linksSubmit-overlay" onclick="closeOverlay(event)">
<form id="linksSubmit-form" class="linksSubmit-form" onclick="event.stopPropagation()">
    <div class="linksSubmit-title-container">
        <style>
    .site-info {
        max-width: 600px; /* 最大宽度 */
        margin: 5px auto; /* 自动水平居中 */
        padding: 20px; /* 内边距 */
        border: 1px solid #ddd; /* 边框 */
        border-radius: 8px; /* 圆角边框 */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 阴影 */
        font-family: Arial, sans-serif; /* 字体样式 */
        background-color: #f9f9f9; /* 背景颜色 */
        text-align: center; /* 居中对齐 */
        font-size: 14px; /* 整体字体大小 */
    }

    .site-info h1 {
        font-size: 22px; /* 标题字体大小 */
        margin-bottom: 20px; /* 标题底部外边距 */
        color: #333; /* 标题颜色 */
        border-bottom: 2px solid #ddd; /* 标题下方边框 */
        padding-bottom: 10px; /* 标题下方内边距 */
    }

    .site-info img {
        width: 80px; /* 图片宽度 */
        height: 80px; /* 图片高度 */
        border-radius: 50%; /* 圆形图片 */
        margin-bottom: 20px; /* 图片底部外边距 */
        display: none; /* 隐藏图片 */
    }

    .site-info p {
        font-size: 14px; /* 正文字体大小 */
        line-height: 1.5; /* 行高 */
        color: #555; /* 正文颜色 */
        margin: 10px 0; /* 段落外边距 */
        cursor: pointer; /* 鼠标悬停时显示手形光标 */
        transition: background-color 0.3s ease; /* 过渡效果 */
    }

    .site-info p:hover {
        background-color: #f0f0f0; /* 悬停时背景颜色 */
    }

    .site-info a {
        color: #0073e6; /* 链接颜色 */
        text-decoration: none; /* 去掉下划线 */
        font-weight: bold; /* 链接加粗 */
    }

    .site-info a:hover {
        text-decoration: underline; /* 鼠标悬停时显示下划线 */
    }

    .wxy-friend-link {
        font-size: 14px; /* 红字字体大小 */
        color: #d9534f !important; /* 红字颜色 */
        font-weight: bold; /* 红字加粗 */
        margin-top: 20px; /* 红字顶部外边距 */
        cursor: default; /* 鼠标悬停时不显示手形光标 */
    }
</style>

<div class="site-info">
    <h1>本站信息</h1>
    <img src="https://www.wxy97.com/logo" alt="人生若只如初见头像" />
    <p id="wxy-name" onclick="copyText('人生若只如初见')"><strong>名称：</strong>人生若只如初见</p>
    <p id="wxy-address" onclick="copyText('https://www.wxy97.com')"><strong>地址：</strong><a href="https://www.wxy97.com" target="_blank" rel="noopener noreferrer">https://www.wxy97.com</a></p>
    <p id="wxy-logo" onclick="copyText('https://www.wxy97.com/logo')"><strong>头像：</strong><a href="https://www.wxy97.com/logo" target="_blank" rel="noopener noreferrer">https://www.wxy97.com/logo</a></p>
    <p id="wxy-description" onclick="copyText('全栈工程师一枚, Java, Golang, Python, Web, 运维技术分享。')"><strong>简介：</strong>全栈工程师一枚, Java, Golang, Python, Web, 运维技术分享。</p>
    <p class="wxy-friend-link">申请前请先添加本站为友链！然后认真填写下面信息</p>
</div>

<script>
    // 添加点击复制功能
    function copyText(text) {
        // 创建一个隐藏的文本域来复制文本
        var textToCopy = document.createElement('textarea');
        textToCopy.value = text; // 获取点击的文本内容
        document.body.appendChild(textToCopy);
        textToCopy.select();
        document.execCommand('copy'); // 执行复制命令
        document.body.removeChild(textToCopy);

        // 提示复制成功
        alert('已复制: ' + text);
    }
</script>

    </div>
    <div class="linksSubmit-input-container">
        <div class="linksSubmit-input-option">
            <input placeholder="" type="text" class="linksSubmit-input" id="displayName" name="displayName" required onblur="checkInput(this)">
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="displayName">网站名称</label>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="url" class="linksSubmit-input linksSubmit-url" id="url" name="url" required onblur="checkInput(this)">
            <div class="linksSubmit-urlDiv">
                <a href="javascript:;" onclick="getLinkDetail()" title="获取网站信息">
                    <svg t="1728469542508" class="get-link-detail-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4299" width="calc(3rem * var(--rem-multiplier))" height="calc(3rem * var(--rem-multiplier))"><path d="M927.377 793.232L717.773 583.624c73.99-132.42 54.809-302.901-57.762-415.47-135.812-135.812-356.026-135.812-491.852 0-135.82 135.834-135.82 356.048 0 491.873 112.56 112.566 283.042 131.739 415.454 57.737L793.237 927.38c37.045 37.053 92.82 41.339 124.558 9.579l19.162-19.162c31.756-31.747 27.472-87.521-9.58-124.565zM215.785 612.385c-109.51-109.508-109.51-287.064 0-396.59 109.533-109.516 287.088-109.516 396.591 0 109.53 109.526 109.53 287.081 0 396.59-109.503 109.526-287.066 109.526-396.591 0zM601.688 252.79l-20.823-24.19-77.283 66.483c-6.713-3.761-14.331-6.084-22.568-6.084-25.715 0-46.564 20.844-46.564 46.543 0 15.607 7.755 29.336 19.538 37.782l-31.22 112.79c-4.76 1.243-9.25 3.143-13.291 5.73l-67.543-39.324c1.542-4.618 2.578-9.482 2.578-14.614 0-25.699-20.858-46.55-46.554-46.55-25.707 0-46.551 20.851-46.551 46.55 0 11.553 4.362 21.982 11.337 30.134l-51.629 85.847 27.354 16.456 52.088-86.636c2.43 0.393 4.86 0.748 7.4 0.748 8.742 0 16.82-2.56 23.8-6.74l68.378 39.809c-1.308 4.288-2.224 8.756-2.224 13.479 0 25.71 20.841 46.553 46.551 46.553 25.704 0 46.551-20.844 46.551-46.553 0-18.301-10.669-33.974-26.022-41.578l29.8-107.705c23.904-1.963 42.763-21.763 42.763-46.177 0-5.76-1.182-11.213-3.1-16.3l77.234-66.453z" p-id="4300"></path></svg>
                </a>
            </div>
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="url">网站地址</label>
            <span class="linksSubmit-iLabel-tip">（请填写完整的网址，例如：https://www.example.com）</span>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="url" class="linksSubmit-input" id="logo" name="logo" onblur="checkInput(this)">
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="logo">网站图标</label>
        </div>
        <div class="linksSubmit-input-option">
            <select class="linksSubmit-input" id="groupName" name="groupName" onblur="checkInput(this)">
            </select>
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="groupName">友链分组</label>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="url" class="linksSubmit-input" id="linkPageUrl" name="linkPageUrl" onblur="checkInput(this)">
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="linkPageUrl">友链页面</label>
            <span class="linksSubmit-iLabel-tip">（贵站展示本站链接的页面地址，一般是友链页面，填写后将自动验证友链关系有效性）</span>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="url" class="linksSubmit-input" id="rssUrl" name="rssUrl" onblur="checkInput(this)">
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="rssUrl">RSS 地址</label>
            <span class="linksSubmit-iLabel-tip">（用于抓取文章）</span>
        </div>
        <div class="linksSubmit-input-option description">
            <textarea placeholder="" class="linksSubmit-input" id="description" name="description" onblur="checkInput(this)"></textarea>
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="description">网站描述</label>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="email" class="linksSubmit-input" id="email" name="email" required onblur="checkInput(this)">
            <div class="linksSubmit-cut"></div>
            <label class="linksSubmit-iLabel" for="email">邮箱地址</label>
            <span class="linksSubmit-iLabel-tip">（用于接收通知）</span>
        </div>
        <div class="linksSubmit-input-option">
            <input placeholder="" type="text" class="linksSubmit-input linksSubmit-verifyCode" id="verifyCode" name="verifyCode" required onblur="checkInput(this)">
            <div class="linksSubmit-verifyCodeDiv">
                <img id="verifyCodeImg" class="linksSubmit-verifyCodeImg" src="/apis/linksSubmit.muyin.site/v1alpha1/captcha"
     title="点击刷新验证码"
     alt="验证码">
<a class="linksSubmit-verifyCodeImg-refresh" href="javascript:void(0);" onclick="refreshVerifyCode()">看不清？换一张</a>

            </div>
            <div class="linksSubmit-cut linksSubmit-cut-short"></div>
            <label class="linksSubmit-iLabel" for="verifyCode">验证码</label>
        </div>
        <button class="linksSubmit-submit" type="button" onclick="linksSubmitAction('/links')">提交链接</button>
    </div>
</form>
<script>
    function getCSSVariableValue(variable) {
        return getComputedStyle(document.documentElement).getPropertyValue(variable).trim();
    }
    function checkInput(e) {
        var inputValue = e.value.trim();
        var isValid = false;
        var successColor = getCSSVariableValue('--success-color');
        var warningColor = getCSSVariableValue('--warning-color');
        if (inputValue === '' && e.required) {
            e.parentNode.querySelector('.linksSubmit-iLabel').style.transform = '';
            e.parentNode.querySelector('.linksSubmit-iLabel').style.color = '';
            e.parentNode.querySelector('.linksSubmit-cut').style.transform = '';
            var inputLabel = e.parentNode.querySelector('.linksSubmit-iLabel').innerHTML;
            linksSubmitToast(inputLabel + '不能为空', 2000);
        } else {
            e.parentNode.querySelector('.linksSubmit-iLabel').style.transform = 'translateY(-30px) translateX(10px) scale(0.75)';
            e.parentNode.querySelector('.linksSubmit-iLabel').style.color = successColor;
            e.parentNode.querySelector('.linksSubmit-cut').style.transform = 'translateY(8px)';
            if (e.type === 'url') {
                isValid = validateUrl(inputValue);
            } else if (e.type === 'email') {
                isValid = validateEmail(inputValue);
            } else {
                isValid = true;
            }
            if (!isValid && e.required) {
                console.log('输入值无效', e);
                e.parentNode.querySelector('.linksSubmit-iLabel').style.color = warningColor;
                var inputLabel = e.parentNode.querySelector('.linksSubmit-iLabel').innerHTML;
                linksSubmitToast(inputLabel + '格式不正确', 2000);
            }
        }
    }
</script>

</div>
<!-- linksSubmit遮罩层 -->

  </span>
</footer>


    <button
      type="button"
      id="btn-scroll-to-top"
      class="duration-300 fixed bottom-5 right-5 flex items-center justify-center rounded-full bg-neutral p-3 opacity-0 shadow transition-all hover:opacity-70 hover:shadow-lg lg:bottom-10 lg:right-10"
    >
      <span class="i-tabler-chevron-up text-2xl text-neutral-content"></span>
    </button>
  </body>
</html>
